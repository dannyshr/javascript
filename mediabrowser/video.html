<html>
	<head>
		<title>וידאו</title>
		<link href="resources/ext-3.2.1/css/ext-all.css" rel="stylesheet" type="text/css" />
		<link href="resources/contentflow/contentflow.css" rel="stylesheet" type="text/css" />
		<link href="resources/css/emb.css" rel="stylesheet" type="text/css" />
		<script src="http://www.google.com/jsapi" type="text/javascript"></script>
		<script src="scripts/utils/BrowserDetect.js" type="text/javascript"></script>
		<script src="scripts/utils/googleSearch.js" type="text/javascript"></script>
		<script src="scripts/ext-3.2.1/ext-base.js" type="text/javascript"></script>
		<script src="scripts/ext-3.2.1/ext-all.js" type="text/javascript"></script>
		<script src="scripts/jquery/jquery-1.4.2.js" type="text/javascript"></script>
		<script src="scripts/contentflow/contentflow.js" type="text/javascript"></script>
		<script src="scripts/ui/video.js" type="text/javascript"></script>
		<script src="scripts/utils/FileSystem.js" type="text/javascript"></script>
		<script type="text/javascript">
			google.setOnLoadCallback(googleSearchOnLoad, true);
			var cfDiv = new ContentFlow("contentFlowDiv");
			
			function loadVideoFiles() {
				//var _path = "file://///saloon//g//media//video//kids/HebrewDubbed";
				var _path = "file:///c:/danny/eBooks";
				_path = urlToPath(_path);
				
				loadFilesFromPath(_path);
				//alert("path: "+urlToPath(_path));
			}
			
			function addCover(_caption) {
				//declare locals
				var imgsDiv = null;
				var imgs = null;
				var item = null;
				var caption = document.getElementById("search").value;
				
				//check for a contentFlow object
				if (cfDiv==null) {
					return;
				}
				
				//get elements by their ids
				imgsDiv = document.getElementById("resultsDiv");
				if (imgsDiv==null) {
					return;
				}
				imgs = imgsDiv.getElementsByTagName("img");
				
				for (var i=0;i<imgs.length;i++) {
					item = document.createElement("div");
					item.setAttribute("class","item");
					item.innerHTML = '<img class="content" src="'+imgs[i].src+'" title="'+caption+'"/><div class="caption">'+caption+'</div>';
					cfDiv.addItem(item, 'last');
				}
			}
			
			function loadFilesFromPath(_path) {
				var lst = listFiles(_path);
				var filePath = null;
				var fileName = null;
				var fileType = null;
				var fileSize = null;
				var lastModif = null;
				var html = "";
				var data = null;
				var fileObj = null;
				var file = null;
				var files = [];
				
				if (lst==null) {
					return;
				}
				
				for (var i=0;i<lst.length;i++) {
					fileObj = lst[i];
					filePath = String(fileObj[0]);
					fileName = filePath.substring(filePath.lastIndexOf("\\")+1);
					fileType = filePath.substring(filePath.lastIndexOf(".")+1);
					fileSize = String(fileObj[1]);
					lastModif = fileObj[2];
					file = [];
					file.push(i+1);
					file.push(fileName);
					file.push(fileType);
					file.push(fileSize);
					file.push(lastModif);
					files.push(file);
				}
				dataStore.loadData(files);
			}
		</script>
	</head>
	<body>
		<div id="searchDivMain" style="display:block;width:620px;height:280px;border:1px solid transparent;overflow:auto;">
			<table>
				<tr>
					<td style="width:65%;"><input id="search" type="text" maxlength="255" style="width:100%;" /></td>
					<td>
						<select id="cmbTypes" size="1">
							<option value="Audio">Audio</option>
							<option value="eBook">Books</option>
							<option value="Pictures">Pictures</option>
							<option value="Video" selected="selected">Video</option>
						</select>
					</td>
					<td><div id="numResDiv"></div></td>
					<td><input id="btnSearch" type="button" value="Search" onclick="doSearch();"></button></td>
					<td><input id="btnAdd" type="button" value="Add Cover" onclick="addCover();"></button></td>
				</tr>
				<tr>
					<td colspan="5"><div id="searchDiv" style="display:none;width:500px;height:200px;border:1px solid black;overflow:auto;background-color:white;"><div></td>
				</tr>
				<tr>
					<td colspan="5"><div id="resultsDiv" style="display:block;width:500px;height:200px;border:1px solid black;overflow:auto;background-color:white;"><div></td>
				</tr>
			</table>
		</div>
	</body>
</html>
